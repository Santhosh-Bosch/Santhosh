name: Deploy Dashboard

on:
  push:
    branches:
      - main
    paths:
      - 'dashboard_enhanced.html'
      - '**.md'
      - 'src/**'

jobs:
  deploy:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
      pages: write
      id-token: write
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Setup Pages
        uses: actions/configure-pages@v4
        
      - name: Create deployment directory
        run: |
          mkdir -p public
          cp dashboard_enhanced.html public/index.html
          cp -r *.md public/ || true
          echo "âœ… Dashboard copied to public directory"
          
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./public
          
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        
      - name: Deployment summary
        run: |
          echo "ðŸš€ Dashboard deployed successfully!"
          echo "ðŸ”— Access at: https://santhosh-bosch.github.io/Santhosh/"
          echo ""
          echo "ðŸ“Š Deployed Components:"
          echo "  âœ… 10-vehicle fleet dashboard"
          echo "  âœ… Speed notification system (80 km/h)"
          echo "  âœ… Live map (Coimbatore)"
          echo "  âœ… Real-time charts"
          echo "  âœ… Documentation"
